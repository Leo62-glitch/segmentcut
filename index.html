<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Découpeur de Vidéo</title>
</head>
<body>
    <h1>Découpeur de Vidéo</h1>

    <label for="videoFile">Sélectionnez une vidéo :</label>
    <input type="file" id="videoFile" accept="video/*"><br><br>

    <label for="segmentDuration">Durée de chaque segment (en secondes) :</label>
    <input type="number" id="segmentDuration" value="30"><br><br>

    <button onclick="uploadAndCutVideo()">Découper la vidéo</button>

    <h2>Résultat :</h2>
    <ul id="segmentsList"></ul>

    <script>
        function uploadAndCutVideo() {
            const fileInput = document.getElementById('videoFile');
            const segmentDuration = parseInt(document.getElementById('segmentDuration').value);

            if (!fileInput.files.length) {
                alert('Veuillez sélectionner une vidéo.');
                return;
            }

            const videoFile = fileInput.files[0];
            const formData = new FormData();
            formData.append('video', videoFile);
            formData.append('segmentDuration', segmentDuration);

            fetch('/cut-video', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                const segmentsList = document.getElementById('segmentsList');
                segmentsList.innerHTML = ''; // Vider la liste de segments précédents

                data.segments.forEach((segment, index) => {
                    const segmentItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = segment;
                    link.textContent = `Télécharger le segment ${index + 1}`;
                    link.download = `segment${index + 1}.mp4`;
                    segmentItem.appendChild(link);
                    segmentsList.appendChild(segmentItem);
                });
            })
            .catch(error => {
                console.error('Erreur:', error);
            });
        }
    </script>
</body>
</html>
